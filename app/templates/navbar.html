<link rel="stylesheet" href="{{ url_for('static', filename='navbar.css') }}">

<div class="navbar">
    <a class="logo" href="{{ url_for('home.home') }}">MiTrÃ¡mite</a>

    <div class="search-container">
        <input type="text" placeholder="Buscar...">
    </div>

    <div class="icons">
        <button class="icon-btn perfil-icon" title="Perfil">ğŸ‘¤</button>
        <button class="icon-btn" title="Notificaciones">ğŸ””</button>
        <button class="icon-btn" title="TrÃ¡mites">ğŸ“‹</button>
    </div>
</div>

<!-- MenÃº desplegable del perfil -->
<div id="perfil-menu" class="perfil-menu">
    <div class="perfil-header">
        Bienvenido, <strong>{{ session.get('nombre', 'Usuario') }}</strong>
    </div>
    <a href="{{ url_for('auth.logout') }}">Cerrar sesiÃ³n</a>
</div>

<!--Event listeners -->

<script>
document.addEventListener('DOMContentLoaded', () => {
    const perfilIcon = document.querySelector('.perfil-icon');
    const menu = document.getElementById('perfil-menu');

    perfilIcon.addEventListener('click', (e) => {
        e.stopPropagation();
        menu.classList.toggle('show');
    });

    document.addEventListener('click', (e) => {
        if (!perfilIcon.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.remove('show');
        }
    });
});
</script>
